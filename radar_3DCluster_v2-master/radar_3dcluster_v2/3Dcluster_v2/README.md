# 第二版聚类代码思路

这一板代码重点仍然是单帧的调试，从寒假之前读取得到的csv点云文件。

1. 读取csv文件，运用线性规划分离出需要进行预处理的点云。线性规划需要用到鼠标回调函数确定需要划分出点云块的边界坐标。

2. 使用RANSAC算法进行平面滤波。算法原理是通过主体数据拟合若干个平面，设定一个阈值，当点到平面的距离在这个阈值以内时就归结为一个平面。最后选取包含点云数量最多的平面为拟合平面进行筛除。

3. 对平面筛除得到的点云进行下采样。原理是将三维网格布满整个空间。当网格中有点云时用网格中点云的质心代替网格中点云。

4. 对做完预处理的点云进行欧式条件聚类。需要设置聚类点云的搜索聚类和点云数量的上下限。
* 得到聚类之后求其质心，经过坐标转换（世界坐标->像素坐标）得到质心的像素坐标。当像素坐标超过图像分辨率时就对聚类进行筛除
* 求聚类在笛卡尔坐标系下的外接长方体，对长方体特征进行筛选
* 对聚类的线性和平面型进行筛选。

### 尝试过但失败的一些筛除聚类方式：
对聚类内部进行再次聚类得到聚类内部聚类的法向量，进行筛除判别。
但是因为聚类难度较高，放弃
